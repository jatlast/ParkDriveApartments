
# automation modes: (https://www.home-assistant.io/docs/automation/modes/)
# JTB - mode is a root level switch for automations
#  - single:      (default) Run the automation once when triggered.
#  - restart:     If the automation is already running, it will be restarted.
#  - queued:      If the automation is already running, the action will be queued until the automation is finished.
#  - parallel:    If the automation is already running, the action will be run in parallel with the already running automation.

- id: pkdr_lights_on
  alias: Building Lights On
  description: Turn ON all the common area lights before sunset
  trigger:
  - platform: numeric_state
    entity_id: sun.sun
    attribute: elevation
    below: '0'
  condition: []
  action:
  - service: switch.turn_on
    data: {}
    target:
      entity_id:
      - switch.b1_lights
      - switch.b2_lights
      - switch.b3_lights
      - switch.b4_lights
  
- id: pkdr_lights_off
  alias: Building Lights Off
  description: Turn OFF all the common area lights before sunset
  trigger:
  - platform: numeric_state
    entity_id: sun.sun
    attribute: elevation
    above: '0'
  condition: []
  action:
  - service: switch.turn_off
    data: {}
    target:
      entity_id:
      - switch.b1_lights
      - switch.b2_lights
      - switch.b3_lights
      - switch.b4_lights
  

- id: pkdr_lights_on_revert
  alias: Building Lights Back On
  description: Check every 15 minutes to see if the sun is below the horizon, then turn on the building lights if they are off.
  trigger:
  - platform: time_pattern
    minutes: /15
  condition:
  - condition: numeric_state
    entity_id: sun.sun
    attribute: elevation
    below: '0'
  action:
  - service: switch.turn_on
    data: {}
    target:
      entity_id:
      - switch.b1_lights
      - switch.b2_lights
      - switch.b3_lights
      - switch.b4_lights
  

- id: pkdr_lights_off_revert
  alias: Building Lights Back Off
  description: Check every 15 minutes to see if the sun is above the horizon, then turn off the building lights if they are on.
  trigger:
  - platform: time_pattern
    minutes: /15
  condition:
  - condition: numeric_state
    entity_id: sun.sun
    attribute: elevation
    above: '0'
  action:
  - service: switch.turn_off
    data: {}
    target:
      entity_id: # group.building_lights
      - switch.b1_lights
      - switch.b2_lights
      - switch.b3_lights
      - switch.b4_lights
  

- id: apt01_volume_changed
  alias: Apt01 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt01_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt01/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt01_volume') | int }}"

- id: apt02_volume_changed
  alias: Apt02 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt02_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt02/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 1
      payload: "{{ states('input_number.apt02_volume') | int }}"

- id: apt03_volume_changed
  alias: Apt03 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt03_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt03/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt03_volume') | int }}"

- id: apt04_volume_changed
  alias: Apt04 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt04_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt04/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt04_volume') | int }}"

- id: apt05_volume_changed
  alias: Apt05 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt05_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt05/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt05_volume') | int }}"

- id: apt06_volume_changed
  alias: Apt06 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt06_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt06/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt06_volume') | int }}"

- id: apt07_volume_changed
  alias: Apt07 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt07_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt07/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt07_volume') | int }}"

- id: apt08_volume_changed
  alias: Apt08 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt08_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt08/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt08_volume') | int }}"

- id: apt09_volume_changed
  alias: Apt09 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt09_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt09/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt09_volume') | int }}"

- id: apt10_volume_changed
  alias: Apt10 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt10_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt10/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt10_volume') | int }}"

- id: apt11_volume_changed
  alias: Apt11 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt11_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt11/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt11_volume') | int }}"

- id: apt12_volume_changed
  alias: Apt12 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt12_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt12/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt12_volume') | int }}"

- id: apt13_volume_changed
  alias: Apt13 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt13_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt13/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt13_volume') | int }}"

- id: apt14_volume_changed
  alias: Apt14 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt14_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt14/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt14_volume') | int }}"

- id: apt15_volume_changed
  alias: Apt15 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt15_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt15/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt15_volume') | int }}"

- id: apt16_volume_changed
  alias: Apt16 Volume Changed
  trigger:
    platform: state
    entity_id: input_number.apt16_volume
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt16/Doorbell/stat/Volume/setVolume
      retain: true
      qos: 2
      payload: "{{ states('input_number.apt16_volume') | int }}"

- id: apt01_no_ac_with_heat
  alias: Apt01 No AC with Heat
  trigger:
    - platform: state
      entity_id: switch.apt01_ac
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.01_heat

- id: apt01_no_heat_with_ac
  alias: Apt01 No Heat with AC
  trigger:
    - platform: state
      entity_id: switch.01_heat
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.apt01_ac

- id: apt02_no_ac_with_heat
  alias: Apt02 No AC with Heat
  trigger:
    - platform: state
      entity_id: switch.apt02_ac
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.02_heat

- id: apt02_no_heat_with_ac
  alias: Apt02 No Heat with AC
  trigger:
    - platform: state
      entity_id: switch.02_heat
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.apt02_ac

- id: apt03_no_ac_with_heat
  alias: Apt03 No AC with Heat
  trigger:
    - platform: state
      entity_id: switch.apt03_ac
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.03_heat

- id: apt03_no_heat_with_ac
  alias: Apt03 No Heat with AC
  trigger:
    - platform: state
      entity_id: switch.03_heat
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.apt03_ac

- id: apt05_no_ac_with_heat
  alias: Apt05 No AC with Heat
  trigger:
    - platform: state
      entity_id: switch.apt05_ac
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.05_heat

- id: apt05_no_heat_with_ac
  alias: Apt05 No Heat with AC
  trigger:
    - platform: state
      entity_id: switch.05_heat
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.apt05_ac

- id: apt06_no_ac_with_heat
  alias: Apt06 No AC with Heat
  trigger:
    - platform: state
      entity_id: switch.apt06_ac
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.06_heat

- id: apt06_no_heat_with_ac
  alias: Apt06 No Heat with AC
  trigger:
    - platform: state
      entity_id: switch.06_heat
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.apt06_ac

- id: apt07_no_ac_with_heat
  alias: Apt07 No AC with Heat
  trigger:
    - platform: state
      entity_id: switch.apt07_ac
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.07_heat

- id: apt07_no_heat_with_ac
  alias: Apt07 No Heat with AC
  trigger:
    - platform: state
      entity_id: switch.07_heat
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.apt07_ac

- id: apt09_no_ac_with_heat
  alias: Apt09 No AC with Heat
  trigger:
    - platform: state
      entity_id: switch.09_ac
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.09_heat

- id: apt09_no_heat_with_ac
  alias: Apt09 No Heat with AC
  trigger:
    - platform: state
      entity_id: switch.09_heat
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.apt09_ac

- id: apt12_no_ac_with_heat
  alias: Apt12 No AC with Heat
  trigger:
    - platform: state
      entity_id: switch.apt12_ac
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.12_heat

- id: apt12_no_heat_with_ac
  alias: Apt12 No Heat with AC
  trigger:
    - platform: state
      entity_id: switch.12_heat
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.apt12_ac

- id: apt14_no_ac_with_heat
  alias: Apt14 No AC with Heat
  trigger:
    - platform: state
      entity_id: switch.apt14_ac
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.14_heat

- id: apt14_no_heat_with_ac
  alias: Apt14 No Heat with AC
  trigger:
    - platform: state
      entity_id: switch.14_heat
      to: 'on'
  action:
    - service: switch.turn_off
      entity_id: switch.apt14_ac

- id: b1_entrance_relock
  alias: B1 Entrance Relock
  trigger:
    platform: state
    entity_id: switch.b1_entrance_lock
    to: 'on'
    for:
      minutes: 1
  action:
  - service: switch.turn_off
    entity_id: switch.b1_entrance_lock

- id: apt01_entrance_relock
  alias: Apt01 Entrance Relock
  trigger:
    platform: state
    entity_id: switch.apt01_entrance_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt01_entrance_lock

- id: b1_doorbell_pressed
  alias: B1 Doorbell Pressed
  trigger:
    - platform: numeric_state
      entity_id: sensor.b1_vdb_doorbells
      below: 2.50
      above: 0.00
  action:
    - choose:
        - conditions:
            - condition: numeric_state
              entity_id: sensor.b1_vdb_doorbells
              above: 0.00
              below: 0.90
          sequence:
            - service: switch.turn_on
              alias: Ring Apt01 Doorbell
              target:
                entity_id: switch.apt01_doorbell
            - service: input_text.set_value
              alias: Set Message Line 1
              data:
                value: Apt 1
              target:
                entity_id: input_text.b1_vdb_line1
    - choose:
        - conditions:
            - condition: numeric_state
              entity_id: sensor.b1_vdb_doorbells
              above: 1.00
              below: 1.50
          sequence:
            - service: switch.turn_on
              alias: Ring Apt02 Doorbell
              target:
                entity_id: switch.apt02_doorbell
            - service: input_text.set_value
              alias: Set Message Line 2
              data:
                value: Apt 2
              target:
                entity_id: input_text.b1_vdb_line2
    - choose:
        - conditions:
            - condition: numeric_state
              entity_id: sensor.b1_vdb_doorbells
              above: 1.60
              below: 1.80
          sequence:
            - service: switch.turn_on
              alias: Ring Apt03 Doorbell
              target:
                entity_id: switch.apt03_doorbell
            - service: input_text.set_value
              alias: Set Message Line 3
              data:
                value: Apt 3
              target:
                entity_id: input_text.b1_vdb_line3
    - choose:
        - conditions:
            - condition: numeric_state
              entity_id: sensor.b1_vdb_doorbells
              above: 1.90
              below: 2.50
          sequence:
            - service: switch.turn_on
              alias: Ring Apt04 Doorbell
              target:
                entity_id: switch.apt04_doorbell
            - service: input_text.set_value
              alias: Set Message Line 4
              data:
                value: Apt 4
              target:
                entity_id: input_text.b1_vdb_line4

- id: apt01_climate_away
  alias: Apt01 Climate Away
  trigger:
    - platform: state
      entity_id: person.apt01_jason
      to: 'not_home'
      for:
        minutes: 15
  action: 
    - service: climate.set_away_mode
      data:
        entity_id:
          - climate.apt01_heat
          - climate.apt01_ac
        away_mode: 'on'
      
- id: apt01_climate_home
  alias: Apt01 Climate Home
  trigger:
    - platform: state
      entity_id: person.apt01_jason
      to: 'home'
      for:
        minutes: 3
  action: 
    - service: climate.set_away_mode
      data:
        entity_id:
          - climate.apt01_heat
          - climate.apt01_ac
        away_mode: 'off'
    - service: light.turn_on
      data:
        entity_id:
          - apt01_bulb_entrance
          - apt01_bulb_hall
          - apt01_bulb_livingroom

- id: apt14_climate_away
  alias: Apt14 Climate Away
  trigger:
    - platform: state
      entity_id: person.apt14_derek
      to: 'not_home'
      for:
        minutes: 15
  action: 
    - service: climate.set_away_mode
      data:
        entity_id:
          - climate.apt14_heat
          - climate.apt14_ac
        away_mode: 'on'
      
- id: apt14_climate_home
  alias: Apt14 Climate Home
  trigger:
    - platform: state
      entity_id: person.apt14_derek
      to: 'home'
      for:
        minutes: 3
  action: 
    - service: climate.set_away_mode
      data:
        entity_id:
          - climate.apt14_heat
          - climate.apt14_ac
        away_mode: 'off'

# Old built-in button config...
# - id: apt01_doorbell_button
#   alias: Apt01 Doorbel Button
#   trigger:
#     - platform: state
#       entity_id: binary_sensor.apt01_video_doorbell_button
#       from: 'off'
#       to: 'on'
#   action:
#     - service: notify.mobile_app_pixel_4_xl
#       data:
#         title: Knock Knock
#         message: Someone is at the door.
#         data:
#           attachment:
#             content-type: jpeg
#           push:
#             category: camera
#           entity_id: camera.apt01_video_doorbell_camera

# New VDB mounted LED button config...
# Apt 01
- id: apt01_vdb_button
  alias: Apt01 VDB Button
  trigger:
    - type: turned_on
      platform: device
      # device_id: 71ad2357154ee1b1a5f65591fb781f53
      device_id: apt01-vdb
      entity_id: binary_sensor.apt01_vdb_doorbell_button
      domain: binary_sensor
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt01/Entrance/cmnd/Doorbell/POWER
      payload: CHIME
      retain: false
      qos: 2
  - service: notify.mobile_app_pixel_4_xl
    data:
      title: Knock Knock
      message: Someone is at the door.
      data:
        attachment:
          content-type: jpeg
        push:
          category: camera
        entity_id: camera.apt01_vdb_camera
  

# Apt 03
- id: apt03_vdb_button
  alias: Apt03 VDB Button
  trigger:
    - type: turned_on
      platform: device
      device_id: apt03-vdb
      entity_id: binary_sensor.apt03_vdb_doorbell_button
      domain: binary_sensor
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt03/Entrance/cmnd/Doorbell/POWER
      payload: CHIME
      retain: false
      qos: 2
  

# Apt 06
- id: apt06_vdb_button
  alias: Apt06 VDB Button
  trigger:
    - type: turned_on
      platform: device
      device_id: apt06-vdb
      entity_id: binary_sensor.apt06_vdb_doorbell_button
      domain: binary_sensor
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt06/Entrance/cmnd/Doorbell/POWER
      payload: CHIME
      retain: false
      qos: 2
  

# Apt 08
- id: apt08_vdb_button
  alias: Apt08 VDB Button
  trigger:
    - type: turned_on
      platform: device
      device_id: apt08-vdb
      entity_id: binary_sensor.apt08_vdb_doorbell_button
      domain: binary_sensor
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt08/Entrance/cmnd/Doorbell/POWER
      payload: CHIME
      retain: false
      qos: 2
  
# Apt 09
- id: apt09_vdb_button
  alias: Apt09 VDB Button
  trigger:
    - type: turned_on
      platform: device
      device_id: apt09-vdb
      entity_id: binary_sensor.apt09_vdb_doorbell_button
      domain: binary_sensor
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt09/Entrance/cmnd/Doorbell/POWER
      payload: CHIME
      retain: false
      qos: 2
  

# Apt 11
- id: apt11_vdb_button
  alias: Apt11 VDB Button
  trigger:
    - type: turned_on
      platform: device
      device_id: apt11-vdb
      entity_id: binary_sensor.apt11_vdb_doorbell_button
      domain: binary_sensor
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt11/Entrance/cmnd/Doorbell/POWER
      payload: CHIME
      retain: false
      qos: 2
  

# Apt 13
- id: apt13_vdb_button
  alias: Apt13 VDB Button
  trigger:
    - type: turned_on
      platform: device
      device_id: apt13-vdb
      entity_id: binary_sensor.apt13_vdb_doorbell_button
      domain: binary_sensor
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt13/Entrance/cmnd/Doorbell/POWER
      payload: CHIME
      retain: false
      qos: 2
  

# Apt 14
- id: apt14_vdb_button
  alias: Apt14 VDB Button
  trigger:
    - type: turned_on
      platform: device
      device_id: apt14-vdb
      entity_id: binary_sensor.apt14_vdb_doorbell_button
      domain: binary_sensor
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt14/Entrance/cmnd/Doorbell/POWER
      payload: CHIME
      retain: false
      qos: 2
  

# Apt 16
- id: apt16_vdb_button
  alias: Apt16 VDB Button
  trigger:
    - type: turned_on
      platform: device
      device_id: apt16-vdb
      entity_id: binary_sensor.apt16_vdb_doorbell_button
      domain: binary_sensor
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt16/Entrance/cmnd/Doorbell/POWER
      payload: CHIME
      retain: false
      qos: 2
  

# Relock VDB Connected Doors...
- id: apt01_vdb_door_relock
  alias: Apt01 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt01_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt01_vdb_door_lock

- id: apt02_vdb_door_relock
  alias: Apt02 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt02_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt02_vdb_door_lock

- id: apt03_vdb_door_relock
  alias: Apt03 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt03_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt03_vdb_door_lock

- id: apt04_vdb_door_relock
  alias: Apt04 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt04_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt04_vdb_door_lock

- id: apt05_vdb_door_relock
  alias: Apt05 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt05_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt05_vdb_door_lock

- id: apt06_vdb_door_relock
  alias: Apt06 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt06_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt06_vdb_door_lock

- id: apt07_vdb_door_relock
  alias: Apt07 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt07_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt07_vdb_door_lock

- id: apt08_vdb_door_relock
  alias: Apt08 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt08_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt08_vdb_door_lock

- id: apt09_vdb_door_relock
  alias: Apt09 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt09_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt09_vdb_door_lock

- id: apt10_vdb_door_relock
  alias: Apt10 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt10_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt10_vdb_door_lock

- id: apt11_vdb_door_relock
  alias: Apt11 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt11_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt11_vdb_door_lock

- id: apt12_vdb_door_relock
  alias: Apt12 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt12_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt12_vdb_door_lock

- id: apt13_vdb_door_relock
  alias: Apt13 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt13_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt13_vdb_door_lock

- id: apt14_vdb_door_relock
  alias: Apt14 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt14_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt14_vdb_door_lock

- id: apt15_vdb_door_relock
  alias: Apt15 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt15_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt15_vdb_door_lock

- id: apt16_vdb_door_relock
  alias: Apt16 Door Relock
  trigger:
    platform: state
    entity_id: switch.apt16_vdb_door_lock
    to: 'on'
    for:
      minutes: 5
  action:
  - service: switch.turn_off
    entity_id: switch.apt16_vdb_door_lock

# Tasmota Switches as Binary Sensors
# Apartment Switches: (7 or 8)
#  1 Entrance
#  2 Kitchen
#  1 Living Room
#  2 Hall
#  1 Bedroom
#  1 Bedroom2 (Two-Bedroom Apartments Only)

##########
# Apt01 
##########

# 01 Entrance
- id: apt01_entrance_switch_toggled_on
  alias: Apt01 Entrance Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt01_entrance_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt01_entrance_bulb

- id: apt01_entrance_switch_toggled_off
  alias: Apt01 Entrance Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt01_entrance_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt01_entrance_bulb

# 01 Kitchen
- id: apt01_kitchen_switch_toggled_on
  alias: Apt01 Kitchen Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt01_kitchen_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt01_kitchen_light2
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt01_kitchen_lights

- id: apt01_kitchen_switch_toggled_off
  alias: Apt01 Kitchen Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt01_kitchen_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt01_kitchen_light2
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt01_kitchen_lights

# 01 Living Room
- id: apt01_livingroom_switch_toggled_on
  alias: Apt01 livingroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt01_livingroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt01_livingroom_lamps

- id: apt01_livingroom_switch_toggled_off
  alias: Apt01 livingroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt01_livingroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt01_livingroom_lamps

# 01 Hall
- id: apt01_hall_switch_toggled_on
  alias: Apt01 hall Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt01_hall_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt01_hall_light0
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt01_hall_bulb

- id: apt01_hall_switch_toggled_off
  alias: Apt01 hall Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt01_hall_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt01_hall_light0
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt01_hall_bulb

# 01 Bedroom
- id: apt01_bedroom_switch_toggled_on
  alias: Apt01 Bedroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt01_bedroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt01_bedroom_switch

- id: apt01_bedroom_switch_toggled_off
  alias: Apt01 Bedroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt01_bedroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt01_bedroom_switch

# 01 Bedroom2 (Tied to Office Light - Computer Desk)
- id: apt01_bedroom2_switch_toggled_on
  alias: Apt01 Bedroom2 Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt01_bedroom2_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt01_office_light2

- id: apt01_bedroom2_switch_toggled_off
  alias: Apt01 Bedroom2 Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt01_bedroom2_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt01_office_light2

##########
# Apt02
##########

##########
# Apt03
##########

# 03 Entrance
- id: apt03_entrance_switch_toggled_on
  alias: Apt03 Entrance Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt03_entrance_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt03_entrance_bulb

- id: apt03_entrance_switch_toggled_off
  alias: Apt03 Entrance Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt03_entrance_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt03_entrance_bulb

# 03 Kitchen
- id: apt03_kitchen_switch_toggled_on
  alias: Apt03 Kitchen Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt03_kitchen_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt03_kitchen_light2
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt03_kitchen_lights

- id: apt03_kitchen_switch_toggled_off
  alias: Apt03 Kitchen Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt03_kitchen_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt03_kitchen_light2
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt03_kitchen_lights

# 03 Living Room
- id: apt03_livingroom_switch_toggled_on
  alias: Apt03 livingroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt03_livingroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt03_livingroom_lamps

- id: apt03_livingroom_switch_toggled_off
  alias: Apt03 livingroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt03_livingroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt03_livingroom_lamps

# 03 Hall
- id: apt03_hall_switch_toggled_on
  alias: Apt03 hall Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt03_hall_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt03_hall_bulb

- id: apt03_hall_switch_toggled_off
  alias: Apt03 hall Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt03_hall_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt03_hall_bulb

# 03 Bedroom
- id: apt03_bedroom_switch_toggled_on
  alias: Apt03 Bedroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt03_bedroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt03_bedroom_switch

- id: apt03_bedroom_switch_toggled_off
  alias: Apt03 Bedroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt03_bedroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt03_bedroom_switch

##########
# Apt04
##########

##########
# Apt05
##########

##########
# Apt06
##########

# 06 Entrance
- id: apt06_entrance_switch_toggled_on
  alias: Apt06 Entrance Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt06_entrance_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt06_entrance_bulb

- id: apt06_entrance_switch_toggled_off
  alias: Apt06 Entrance Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt06_entrance_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt06_entrance_bulb

# 06 Kitchen
- id: apt06_kitchen_switch_toggled_on
  alias: Apt06 Kitchen Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt06_kitchen_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt06_kitchen_light2
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt06_kitchen_lights

- id: apt06_kitchen_switch_toggled_off
  alias: Apt06 Kitchen Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt06_kitchen_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt06_kitchen_light2
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt06_kitchen_lights

# 06 Living Room
- id: apt06_livingroom_switch_toggled_on
  alias: Apt06 livingroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt06_livingroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt06_livingroom_lamps

- id: apt06_livingroom_switch_toggled_off
  alias: Apt06 livingroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt06_livingroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt06_livingroom_lamps

# 06 Hall
- id: apt06_hall_switch_toggled_on
  alias: Apt06 hall Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt06_hall_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt06_hall_bulb

- id: apt06_hall_switch_toggled_off
  alias: Apt06 hall Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt06_hall_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt06_hall_bulb

# 06 Bedroom
- id: apt06_bedroom_switch_toggled_on
  alias: Apt06 Bedroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt06_bedroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt06_bedroom_switch

- id: apt06_bedroom_switch_toggled_off
  alias: Apt06 Bedroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt06_bedroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt06_bedroom_switch


##########
# Apt07
##########

##########
# Apt08
##########

# 08 Entrance
- id: apt08_entrance_switch_toggled_on
  alias: Apt08 Entrance Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt08_entrance_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt08_entrance_bulb

- id: apt08_entrance_switch_toggled_off
  alias: Apt08 Entrance Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt08_entrance_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt08_entrance_bulb

# 08 Kitchen
- id: apt08_kitchen_switch_toggled_on
  alias: Apt08 Kitchen Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt08_kitchen_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt08_kitchen_light2
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt08_kitchen_lights

- id: apt08_kitchen_switch_toggled_off
  alias: Apt08 Kitchen Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt08_kitchen_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt08_kitchen_light2
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt08_kitchen_lights

# 08 Living Room
- id: apt08_livingroom_switch_toggled_on
  alias: Apt08 livingroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt08_livingroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt08_livingroom_lamps

- id: apt08_livingroom_switch_toggled_off
  alias: Apt08 livingroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt08_livingroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt08_livingroom_lamps

# 08 Hall
- id: apt08_hall_switch_toggled_on
  alias: Apt08 hall Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt08_hall_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt08_hall_light0
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt08_hall_bulb

- id: apt08_hall_switch_toggled_off
  alias: Apt08 hall Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt08_hall_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt08_hall_light0
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt08_hall_bulb

# 08 Bedroom
- id: apt08_bedroom_switch_toggled_on
  alias: Apt08 Bedroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt08_bedroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt08_bedroom_bulb
      # entity_id: switch.apt08_bedroom_switch

- id: apt08_bedroom_switch_toggled_off
  alias: Apt08 Bedroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt08_bedroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt08_bedroom_bulb
      # entity_id: switch.apt08_bedroom_switch

# 08 Bedroom2
- id: apt08_bedroom2_switch_toggled_on
  alias: Apt08 Bedroom2 Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt08_bedroom2_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt08_bedroom2_bulb
      # entity_id: switch.apt08_bedroom2_switch

- id: apt08_bedroom2_switch_toggled_off
  alias: Apt08 Bedroom2 Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt08_bedroom2_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      # entity_id: switch.apt08_bedroom2_switch
      entity_id: light.apt08_bedroom2_bulb

##########
# Apt09
##########

# 09 Entrance
- id: apt09_entrance_switch_toggled_on
  alias: Apt09 Entrance Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt09_entrance_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt09_entrance_bulb

- id: apt09_entrance_switch_toggled_off
  alias: Apt09 Entrance Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt09_entrance_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt09_entrance_bulb

# 09 Kitchen
- id: apt09_kitchen_switch_toggled_on
  alias: Apt09 Kitchen Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt09_kitchen_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt09_kitchen_light2
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt09_kitchen_lights

- id: apt09_kitchen_switch_toggled_off
  alias: Apt09 Kitchen Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt09_kitchen_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt09_kitchen_light2
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt09_kitchen_lights

# 09 Hall
- id: apt09_hall_switch_toggled_on
  alias: Apt09 hall Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt09_hall_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt09_hall_light0
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt09_hall_bulb

- id: apt09_hall_switch_toggled_off
  alias: Apt09 hall Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt09_hall_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt09_hall_light0
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt09_hall_bulb

# 09 Living Room
- id: apt09_livingroom_switch_toggled_on
  alias: Apt09 livingroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt09_livingroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt09_livingroom_lamps

- id: apt09_livingroom_switch_toggled_off
  alias: Apt09 livingroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt09_livingroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt09_livingroom_lamps

# 09 Hall
- id: apt09_hall_switch_toggled_on
  alias: Apt09 hall Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt09_hall_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt09_hall_light0
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt09_hall_bulb

- id: apt09_hall_switch_toggled_off
  alias: Apt09 hall Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt09_hall_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt09_hall_light0
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt09_hall_bulb

# 09 Bedroom
- id: apt09_bedroom_switch_toggled_on
  alias: Apt09 Bedroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt09_bedroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt09_bedroom_bulb
      # entity_id: switch.apt09_bedroom_switch

- id: apt09_bedroom_switch_toggled_off
  alias: Apt09 Bedroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt09_bedroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt09_bedroom_bulb
      # entity_id: switch.apt09_bedroom_switch

# 09 Bedroom2
- id: apt09_bedroom2_switch_toggled_on
  alias: Apt09 Bedroom2 Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt09_bedroom2_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt09_bedroom2_bulb
      # entity_id: switch.apt09_bedroom2_switch

- id: apt09_bedroom2_switch_toggled_off
  alias: Apt09 Bedroom2 Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt09_bedroom2_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      # entity_id: switch.apt09_bedroom2_switch
      entity_id: light.apt09_bedroom2_bulb

##########
# Apt10
##########

##########
# Apt11
##########

# 11 Entrance
- id: apt11_entrance_switch_toggled_on
  alias: Apt11 Entrance Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt11_entrance_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt11_entrance_bulb

- id: apt11_entrance_switch_toggled_off
  alias: Apt11 Entrance Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt11_entrance_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt11_entrance_bulb

# 11 Kitchen
- id: apt11_kitchen_switch_toggled_on
  alias: Apt11 Kitchen Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt11_kitchen_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt11_kitchen_light2
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt11_kitchen_lights

- id: apt11_kitchen_switch_toggled_off
  alias: Apt11 Kitchen Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt11_kitchen_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt11_kitchen_light2
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt11_kitchen_lights

# 11 Living Room
- id: apt11_livingroom_switch_toggled_on
  alias: Apt11 livingroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt11_livingroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt11_livingroom_lamps

- id: apt11_livingroom_switch_toggled_off
  alias: Apt11 livingroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt11_livingroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt11_livingroom_lamps

# 11 Hall
- id: apt11_hall_switch_toggled_on
  alias: Apt11 hall Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt11_hall_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt11_hall_light0
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt11_hall_bulb

- id: apt11_hall_switch_toggled_off
  alias: Apt11 hall Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt11_hall_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt11_hall_light0
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt11_hall_bulb

# 11 Bedroom
- id: apt11_bedroom_switch_toggled_on
  alias: Apt11 Bedroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt11_bedroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt11_bedroom_switch

- id: apt11_bedroom_switch_toggled_off
  alias: Apt11 Bedroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt11_bedroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt11_bedroom_switch

# 11 Bedroom2
- id: apt11_bedroom2_switch_toggled_on
  alias: Apt11 Bedroom2 Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt11_bedroom2_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt11_bedroom2_switch

- id: apt11_bedroom2_switch_toggled_off
  alias: Apt11 Bedroom2 Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt11_bedroom2_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt11_bedroom2_switch

##########
# Apt12
##########

##########
# Apt13
##########

# 13 Entrance
- id: apt13_entrance_switch_toggled_on
  alias: Apt13 Entrance Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt13_entrance_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt13_entrance_bulb

- id: apt13_entrance_switch_toggled_off
  alias: Apt13 Entrance Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt13_entrance_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt13_entrance_bulb

# 13 Kitchen
- id: apt13_kitchen_switch_toggled_on
  alias: Apt13 Kitchen Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt13_kitchen_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt13_kitchen_light2
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt13_kitchen_lights

- id: apt13_kitchen_switch_toggled_off
  alias: Apt13 Kitchen Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt13_kitchen_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt13_kitchen_light2
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt13_kitchen_lights

# 13 Living Room
- id: apt13_livingroom_switch_toggled_on
  alias: Apt13 livingroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt13_livingroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt13_livingroom_lamps

- id: apt13_livingroom_switch_toggled_off
  alias: Apt13 livingroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt13_livingroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt13_livingroom_lamps

# 13 Hall
- id: apt13_hall_switch_toggled_on
  alias: Apt13 hall Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt13_hall_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt13_hall_bulb

- id: apt13_hall_switch_toggled_off
  alias: Apt13 hall Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt13_hall_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt13_hall_bulb

# 13 Bedroom
- id: apt13_bedroom_switch_toggled_on
  alias: Apt13 Bedroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt13_bedroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt13_bedroom_switch

- id: apt13_bedroom_switch_toggled_off
  alias: Apt13 Bedroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt13_bedroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt13_bedroom_switch

##########
# Apt14
##########

# 14 Entrance
- id: apt14_entrance_switch_toggled_on
  alias: Apt14 Entrance Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt14_entrance_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt14_entrance_bulb

- id: apt14_entrance_switch_toggled_off
  alias: Apt14 Entrance Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt14_entrance_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt14_entrance_bulb

# 14 Kitchen
- id: apt14_kitchen_switch_toggled_on
  alias: Apt14 Kitchen Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt14_kitchen_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt14_kitchen_light2
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt14_kitchen_lights

- id: apt14_kitchen_switch_toggled_off
  alias: Apt14 Kitchen Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt14_kitchen_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt14_kitchen_light2
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt14_kitchen_lights

# 14 Living Room
- id: apt14_livingroom_switch_toggled_on
  alias: Apt14 livingroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt14_livingroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt14_livingroom_lamps

- id: apt14_livingroom_switch_toggled_off
  alias: Apt14 livingroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt14_livingroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt14_livingroom_lamps

# 14 Hall
- id: apt14_hall_switch_toggled_on
  alias: Apt14 hall Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt14_hall_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt14_hall_bulb

- id: apt14_hall_switch_toggled_off
  alias: Apt14 hall Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt14_hall_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt14_hall_bulb

# 14 Bedroom
- id: apt14_bedroom_switch_toggled_on
  alias: Apt14 Bedroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt14_bedroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt14_bedroom_switch

- id: apt14_bedroom_switch_toggled_off
  alias: Apt14 Bedroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt14_bedroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt14_bedroom_switch

##########
# Apt15
##########

##########
# Apt16
##########

# 16 Entrance
- id: apt16_entrance_switch_toggled_on
  alias: Apt16 Entrance Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt16_entrance_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt16_entrance_bulb

- id: apt16_entrance_switch_toggled_off
  alias: Apt16 Entrance Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt16_entrance_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt16_entrance_bulb

# 16 Kitchen
- id: apt16_kitchen_switch_toggled_on
  alias: Apt16 Kitchen Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt16_kitchen_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt16_kitchen_light2
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt16_kitchen_lights

- id: apt16_kitchen_switch_toggled_off
  alias: Apt16 Kitchen Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt16_kitchen_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt16_kitchen_light2
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt16_kitchen_lights

# 16 Living Room
- id: apt16_livingroom_switch_toggled_on
  alias: Apt16 livingroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt16_livingroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt16_livingroom_lamps

- id: apt16_livingroom_switch_toggled_off
  alias: Apt16 livingroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt16_livingroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt16_livingroom_lamps

# 16 Hall
- id: apt16_hall_switch_toggled_on
  alias: Apt16 hall Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt16_hall_light1
      to: "on"
    - platform: state
      entity_id: binary_sensor.apt16_hall_light0
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: light.apt16_hall_bulb

- id: apt16_hall_switch_toggled_off
  alias: Apt16 hall Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt16_hall_light1
      to: "off"
    - platform: state
      entity_id: binary_sensor.apt16_hall_light0
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: light.apt16_hall_bulb

# 16 Bedroom
- id: apt16_bedroom_switch_toggled_on
  alias: Apt16 Bedroom Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt16_bedroom_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt16_bedroom_switch

- id: apt16_bedroom_switch_toggled_off
  alias: Apt16 Bedroom Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt16_bedroom_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt16_bedroom_switch

# 16 Bedroom2
- id: apt16_bedroom2_switch_toggled_on
  alias: Apt16 Bedroom2 Switch Toggled On
  description: Switch Toggled On
  trigger:
    - platform: state
      entity_id: binary_sensor.apt16_bedroom2_light
      to: "on"
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.apt16_bedroom2_switch

- id: apt16_bedroom2_switch_toggled_off
  alias: Apt16 Bedroom2 Switch Toggled Off
  description: Switch Toggled Off
  trigger:
    - platform: state
      entity_id: binary_sensor.apt16_bedroom2_light
      to: "off"
  action:
    service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.apt16_bedroom2_switch


# - id: apt01_entrance_switch_on
#   alias: Apt01 Entrance Switch On
#   description: Apt01 Entrance Switch On
#   trigger:
#     - platform: mqtt
#       topic: PkDr/Apt01/Entrance/tele/Switch/SENSOR
#       payload: "OFF"
#       value_template: "{{ value_json.Switch1 }}"
#   condition: []
#   action:
#     - service: mqtt.publish
#       data:
#         qos: 1
#         retain: true
#         payload: "ON"
#         topic: PkDr/Apt01/Entrance/cmnd/Bulb/POWER
  
# - id: apt01_entrance_switch_off
#   alias: Apt01 Entrance Switch Off
#   description: Apt01 Entrance Switch Off
#   trigger:
#     - platform: mqtt
#       topic: PkDr/Apt01/Entrance/tele/Switch/SENSOR
#       payload: "ON"
#       value_template: "{{ value_json.Switch1 }}"
#   condition: []
#   action:
#     - service: mqtt.publish
#       data:
#         qos: 1
#         retain: true
#         payload: "OFF"
#         topic: PkDr/Apt01/Entrance/cmnd/Bulb/POWER
  

# - id: apt01_hall_switch_on_catchall
#   alias: Apt01 Hall Switch On
#   description: Apt01 Hall Switch 1 or 0 On
#   trigger:
#     - platform: mqtt
#       topic: PkDr/Apt01/Hall/tele/Switch1/SENSOR
#       payload: "OFF"
#       value_template: "{{ value_json.Switch1 }}"
#     - platform: mqtt
#       topic: PkDr/Apt01/Hall/tele/Switch0/SENSOR
#       payload: "OFF"
#       value_template: "{{ value_json.Switch1 }}"
#   condition: []
#   action:
#     - service: mqtt.publish
#       data:
#         qos: 1
#         retain: true
#         payload: "ON"
#         topic: PkDr/Apt01/Hall/cmnd/Bulb/POWER
  

# - id: apt01_hall_switch_off_catchall
#   alias: Apt01 Hall Switch Off
#   description: Apt01 Hall Switch 1 or 2 Off
#   trigger:
#     - platform: mqtt
#       topic: PkDr/Apt01/Hall/tele/Switch1/SENSOR
#       payload: "ON"
#       value_template: "{{ value_json.Switch1 }}"
#     - platform: mqtt
#       topic: PkDr/Apt01/Hall/tele/Switch0/SENSOR
#       payload: "ON"
#       value_template: "{{ value_json.Switch1 }}"
#   condition: []
#   action:
#     - service: mqtt.publish
#       data:
#         qos: 1
#         retain: true
#         payload: "OFF"
#         topic: PkDr/Apt01/Hall/cmnd/Bulb/POWER
  

# When SwitchMode = 15 switch payloads are inverted.  Thus, "ON" catches "OFF" and sends "ON"
# - id: apt01_livingroom_switch_on
#   alias: Apt01 LivingRoom Switch On
#   description: Apt01 LivingRoom Switch On
#   trigger:
#     - platform: mqtt
#       topic: PkDr/Apt01/LivingRoom/tele/Switch/SENSOR
#       payload: "OFF"
#       value_template: "{{ value_json.Switch1 }}"
#   condition: []
#   action:
#     - service: mqtt.publish
#       data:
#         qos: 1
#         retain: true
#         payload: "ON"
#         topic: PkDr/Apt01/LivingRoom/cmnd/Lamp1/POWER
#     - service: mqtt.publish
#       data:
#         qos: 1
#         retain: true
#         payload: "ON"
#         topic: PkDr/Apt01/LivingRoom/cmnd/Lamp2/POWER
  

# - id: apt01_livingroom_switch_off
#   alias: Apt01 LivingRoom Switch Off
#   description: Apt01 LivingRoom Switch Off
#   trigger:
#     - platform: mqtt
#       topic: PkDr/Apt01/LivingRoom/tele/Switch/SENSOR
#       payload: "ON"
#       value_template: "{{ value_json.Switch1 }}"
#   condition: []
#   action:
#     - service: mqtt.publish
#       data:
#         qos: 1
#         retain: true
#         payload: "OFF"
#         topic: PkDr/Apt01/LivingRoom/cmnd/Lamp1/POWER
#     - service: mqtt.publish
#       data:
#         qos: 1
#         retain: true
#         payload: "OFF"
#         topic: PkDr/Apt01/LivingRoom/cmnd/Lamp2/POWER


# - id: apt01_kitchen_switch_catch_ons
#   alias: Apt01 Kitchen Switch Catch Ons
#   description: Apt01 Kitchen Switch 1 or 0 On
#   trigger:
#     - platform: mqtt
#       topic: PkDr/Apt01/Kitchen/tele/Switch1/SENSOR
#       payload: "OFF"
#       value_template: "{{ value_json.Switch1 }}"
#     - platform: mqtt
#       topic: PkDr/Apt01/Kitchen/tele/Switch2/SENSOR
#       payload: "OFF"
#       value_template: "{{ value_json.Switch1 }}"
#   condition: []
#   action:
#     service: homeassistant.turn_on
#     data: {}
#     target:
#       entity_id: switch.apt01_kitchen_lights
#   # action:
#   #   - service: mqtt.publish
#   #     data:
#   #       qos: 1
#   #       retain: true
#   #       payload: "ON"
#   #       topic: PkDr/Apt01/Kitchen/cmnd/Switch1/POWER
#   #   - service: mqtt.publish
#   #     data:
#   #       qos: 1
#   #       retain: true
#   #       payload: "ON"
#   #       topic: PkDr/Apt01/Kitchen/cmnd/Switch2/POWER
  

# - id: apt01_kitchen_switch_catch_offs
#   alias: Apt01 Kitchen Switch Catch Offs
#   description: Apt01 Kitchen Switch 1 or 0 Offs
#   trigger:
#     - platform: mqtt
#       topic: PkDr/Apt01/Kitchen/tele/Switch1/SENSOR
#       payload: "ON"
#       value_template: "{{ value_json.Switch1 }}"
#     - platform: mqtt
#       topic: PkDr/Apt01/Kitchen/tele/Switch2/SENSOR
#       payload: "ON"
#       value_template: "{{ value_json.Switch1 }}"
#   condition: []
#   action:
#     service: homeassistant.turn_off
#     data: {}
#     target:
#       entity_id: switch.apt01_kitchen_lights
#   # action:
#   #   - service: mqtt.publish
#   #     data:
#   #       qos: 1
#   #       retain: true
#   #       payload: "OFF"
#   #       topic: PkDr/Apt01/Kitchen/cmnd/Switch1/POWER
#   #   - service: mqtt.publish
#   #     data:
#   #       qos: 1
#   #       retain: true
#   #       payload: "OFF"
#   #       topic: PkDr/Apt01/Kitchen/cmnd/Switch2/POWER
  

# - id: apt01_kitchen_switches_catchall
#   alias: Apt01 Kitchen Switches Catchall
#   description: Apt01 Kitchen Switch 1 or 2 On or Off
#   trigger:
#     - platform: mqtt
#       topic: PkDr/Apt01/Kitchen/tele/Switch1/SENSOR
#       # payload: "ON"
#       value_template: "{{ value_json.Switch1 }}"
#     - platform: mqtt
#       topic: PkDr/Apt01/Kitchen/tele/Switch2/SENSOR
#       # payload: "ON"
#       value_template: "{{ value_json.Switch1 }}"
#     # - platform: mqtt
#     #   topic: PkDr/Apt01/Kitchen/tele/Switch1/SENSOR
#     #   payload: "OFF"
#     #   value_template: "{{ value_json.Switch1 }}"
#     # - platform: mqtt
#     #   topic: PkDr/Apt01/Kitchen/tele/Switch2/SENSOR
#     #   payload: "OFF"
#     #   value_template: "{{ value_json.Switch1 }}"
#   condition: []
#   action:
#     choose:
#       - conditions:
#           - condition: template
#             value_template: "{{ trigger.payload.value_json.Switch1 }}"
#         sequence:
#           - service: mqtt.publish
#             data:
#               qos: 1
#               retain: true
#               payload: "ON"
#               topic: PkDr/Apt01/Kitchen/cmnd/Switch1/POWER
#           - service: mqtt.publish
#             data:
#               qos: 1
#               retain: true
#               payload: "ON"
#               topic: PkDr/Apt01/Kitchen/cmnd/Switch2/POWER
#     default:
#       - choose:
#           - conditions:
#               - condition: template
#                 value_template: "{{ trigger.payload.value_json.Switch1 == 'OFF' }}"
#             sequence:
#               - service: mqtt.publish
#                 data:
#                   qos: 1
#                   retain: true
#                   payload: "OFF"
#                   topic: PkDr/Apt01/Kitchen/cmnd/Switch1/POWER
#               - service: mqtt.publish
#                 data:
#                   qos: 1
#                   retain: true
#                   payload: "OFF"
#                   topic: PkDr/Apt01/Kitchen/cmnd/Switch2/POWER
#         default:
#           - service: mqtt.publish
#             data:
#               qos: 1
#               retain: true
#               payload: 
#                 - Time: "2000-01-01T00:00:00"
#                 - Switch1: "OFF"
#               # topic: PkDr/Apt01/Kitchen/cmnd/Switch1/POWER
#               topic: PkDr/Apt01/Kitchen/tele/Switch2/SENSOR
#   

# 13:30:36.332 MQT: PkDr/Apt01/Kitchen/tele/Switch2/SENSOR = {"Time":"2023-04-30T13:30:36","Switch1":"ON"}
# {## Imitate available variables: ##}
# {% {
#   "Time": "2023-04-30T13:30:36",
#   "Switch1": "OFF"
# } %}

# Repurposed Living Room Wall Switches

#  Toggle Automations...
# - id: apt01_livingroom_switch_toggle
#   alias: Apt01 Living Room Switch Toggle
#   trigger:
#     - platform: device
#       type: changed_states
#       device_id: apt01_livingroom_switch
#       entity_id: switch.apt01_livingroom_switch
#       domain: switch
#   condition: []
#   action:
#   - service: mqtt.publish
#     data:
#       topic: PkDr/Apt01/LivingRoom/cmnd/Bulb/POWER
#       payload: TOGGLE
#       qos: 1
#   

- id: apt02_livingroom_switch_toggle
  alias: Apt02 Living Room Switch Toggle
  trigger:
    - platform: device
      type: changed_states
      device_id: apt02_livingroom_switch
      entity_id: switch.apt02_livingroom_switch
      domain: switch
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt02/LivingRoom/cmnd/Bulb/POWER
      payload: TOGGLE
      retain: true
      qos: 1
  

# - id: apt03_livingroom_switch_toggle
#   alias: Apt03 Living Room Switch Toggle
#   trigger:
#     - platform: device
#       type: changed_states
#       device_id: apt03_livingroom_switch
#       entity_id: switch.apt03_livingroom_switch
#       domain: switch
#   condition: []
#   action:
#   - service: mqtt.publish
#     data:
#       topic: PkDr/Apt03/LivingRoom/cmnd/Bulb/POWER
#       payload: TOGGLE
#       retain: true
#       qos: 1
  

- id: apt04_livingroom_switch_toggle
  alias: Apt04 Living Room Switch Toggle
  trigger:
    - platform: device
      type: changed_states
      device_id: apt04_livingroom_switch
      entity_id: switch.apt04_livingroom_switch
      domain: switch
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt04/LivingRoom/cmnd/Bulb/POWER
      payload: TOGGLE
      retain: true
      qos: 1
  

- id: apt05_livingroom_switch_toggle
  alias: Apt05 Living Room Switch Toggle
  trigger:
    - platform: device
      type: changed_states
      device_id: apt05_livingroom_switch
      entity_id: switch.apt05_livingroom_switch
      domain: switch
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt05/LivingRoom/cmnd/Bulb/POWER
      payload: TOGGLE
      retain: true
      qos: 1
  

- id: apt06_livingroom_switch_toggle
  alias: Apt06 Living Room Switch Toggle
  trigger:
    - platform: device
      type: changed_states
      device_id: apt06_livingroom_switch
      entity_id: switch.apt06_livingroom_switch
      domain: switch
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt06/LivingRoom/cmnd/Bulb/POWER
      payload: TOGGLE
      retain: true
      qos: 1
  

- id: apt07_livingroom_switch_toggle
  alias: Apt07 Living Room Switch Toggle
  trigger:
    - platform: device
      type: changed_states
      device_id: apt07_livingroom_switch
      entity_id: switch.apt07_livingroom_switch
      domain: switch
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt07/LivingRoom/cmnd/Bulb/POWER
      payload: TOGGLE
      retain: true
      qos: 1
  

# - id: apt08_livingroom_switch_toggle
#   alias: Apt08 Living Room Switch Toggle
#   trigger:
#     - platform: device
#       type: changed_states
#       device_id: apt08_livingroom_switch
#       entity_id: switch.apt08_livingroom_switch
#       domain: switch
#   condition: []
#   action:
#   - service: mqtt.publish
#     data:
#       topic: PkDr/Apt08/LivingRoom/cmnd/Bulb/POWER
#       payload: TOGGLE
#       retain: true
#       qos: 1
  

# - id: apt09_livingroom_switch_toggle
#   alias: Apt09 Living Room Switch Toggle
#   trigger:
#     - platform: device
#       type: changed_states
#       device_id: apt09_livingroom_switch
#       entity_id: switch.apt09_livingroom_switch
#       domain: switch
#   condition: []
#   action:
#   - service: mqtt.publish
#     data:
#       topic: PkDr/Apt09/LivingRoom/cmnd/Bulb/POWER
#       payload: TOGGLE
#       retain: true
#       qos: 1
  

- id: apt10_livingroom_switch_toggle
  alias: Apt10 Living Room Switch Toggle
  trigger:
    - platform: device
      type: changed_states
      device_id: apt10_livingroom_switch
      entity_id: switch.apt10_livingroom_switch
      domain: switch
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt10/LivingRoom/cmnd/Bulb/POWER
      payload: TOGGLE
      retain: true
      qos: 1
  

# - id: apt11_livingroom_switch_toggle
#   alias: Apt11 Living Room Switch Toggle
#   trigger:
#     - platform: device
#       type: changed_states
#       device_id: apt11_livingroom_switch
#       entity_id: switch.apt11_livingroom_switch
#       domain: switch
#   condition: []
#   action:
#   - service: mqtt.publish
#     data:
#       topic: PkDr/Apt11/LivingRoom/cmnd/Bulb/POWER
#       payload: TOGGLE
#       retain: true
#       qos: 1
  

- id: apt12_livingroom_switch_toggle
  alias: Apt12 Living Room Switch Toggle
  trigger:
    - platform: device
      type: changed_states
      device_id: apt12_livingroom_switch
      entity_id: switch.apt12_livingroom_switch
      domain: switch
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt12/LivingRoom/cmnd/Bulb/POWER
      payload: TOGGLE
      retain: true
      qos: 1
  

# - id: apt13_livingroom_switch_toggle
#   alias: Apt13 Living Room Switch Toggle
#   trigger:
#     - platform: device
#       type: changed_states
#       device_id: apt13_livingroom_switch
#       entity_id: switch.apt13_livingroom_switch
#       domain: switch
#   condition: []
#   action:
#   - service: mqtt.publish
#     data:
#       topic: PkDr/Apt13/LivingRoom/cmnd/Bulb/POWER
#       payload: TOGGLE
#       retain: true
#       qos: 1
  

# - id: apt14_livingroom_switch_toggle
#   alias: Apt14 Living Room Switch Toggle
#   trigger:
#     - platform: device
#       type: changed_states
#       device_id: apt14_livingroom_switch
#       entity_id: switch.apt14_livingroom_switch
#       domain: switch
#   condition: []
#   action:
#   - service: mqtt.publish
#     data:
#       topic: PkDr/Apt14/LivingRoom/cmnd/Bulb/POWER
#       payload: TOGGLE
#       retain: true
#       qos: 1
  

- id: apt15_livingroom_switch_toggle
  alias: Apt15 Living Room Switch Toggle
  trigger:
    - platform: device
      type: changed_states
      device_id: apt15_livingroom_switch
      entity_id: switch.apt15_livingroom_switch
      domain: switch
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: PkDr/Apt15/LivingRoom/cmnd/Bulb/POWER
      payload: TOGGLE
      retain: true
      qos: 1
  
- id: b1_lights_on_motion
  alias: B1 Lights On Motion
  description: B1 lights turned on when motion detected
  trigger:
    - platform: state
      entity_id: binary_sensor.apt01_vdb_pir
      to: 'on'
    - platform: state
      entity_id: binary_sensor.apt03_vdb_pir
      to: 'on'
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.b1_lights

- id: b2_lights_on_motion
  alias: B2 Lights On Motion
  description: B2 lights turned on when motion detected
  trigger:
    - platform: state
      entity_id: binary_sensor.apt06_vdb_pir
      to: 'on'
    - platform: state
      entity_id: binary_sensor.apt08_vdb_pir
      to: 'on'
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.b2_lights

- id: b3_lights_on_motion
  alias: B3 Lights On Motion
  description: B3 lights turned on when motion detected
  trigger:
    - platform: state
      entity_id: binary_sensor.apt11_vdb_pir
      to: 'on'
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.b3_lights

- id: b4_lights_on_motion
  alias: B4 Lights On Motion
  description: B4 lights turned on when motion detected
  trigger:
    - platform: state
      entity_id: binary_sensor.apt13_vdb_pir
      to: 'on'
    - platform: state
      entity_id: binary_sensor.apt14_vdb_pir
      to: 'on'
    - platform: state
      entity_id: binary_sensor.apt16_vdb_pir
      to: 'on'
  action:
    service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.b4_lights

